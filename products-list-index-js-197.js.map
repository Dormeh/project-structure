{"version":3,"sources":["webpack://project-structure/./src/components/notification/index.js","webpack://project-structure/./src/components/sortable-table/index.js","webpack://project-structure/./src/components/double-slider/index.js","webpack://project-structure/./src/pages/products/list/products-header.js","webpack://project-structure/./src/pages/products/list/index.js","webpack://project-structure/./src/utils/fetch-json.js"],"names":["NotificationMessage","constructor","message","duration","type","this","render","isAlreadyShow","remove","getTemplate","element","document","createElement","innerHTML","firstElementChild","classList","add","show","body","append","setTimeout","destroy","SortableTable","headerConfig","data","sorted","id","find","item","sortable","order","isSortLocally","url","clickableString","contains","endOfData","getBoundingClientRect","bottom","documentElement","clientHeight","loadData","then","update","catch","error","event","target","closest","dataset","sort","r","URL","process","initEventListeners","renderHeaders","sortColumn","headerArr","obj","arrowTemplate","orderType","push","title","join","renderBody","bodyArr","filter","map","el","template","getSubElements","arr","querySelectorAll","elem","subElements","getTable","searchParams","set","length","pageSize","fetchJson","replace","rows","childNodes","header","addEventListener","handleClick","onWindowScroll","sortOnClient","direction","asc","desc","sortType","a","b","localeCompare","sortOnServer","removeEventListener","DoubleSlider","min","max","formatValue","value","selected","from","to","preventDefault","left","innerLeft","right","innerRight","width","inner","dragging","thumbLeft","newLeft","clientX","shiftX","parseFloat","thumbRight","style","progress","getValue","newRight","onThumbPointerMove","onThumbPointerUp","dispatchEvent","CustomEvent","detail","bubbles","ondragstart","onThumbPointerDown","result","elements","subElement","rangeTotal","Math","floor","thumbElem","round","category","Page","components","sortableTable","start","end","initComponents","sliderContainer","renderComponents","component","Object","keys","updateComponents","filterName","filterStatus","status","options","delete","values","async","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","Error","super","window","reason","alert"],"mappings":"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","file":"products-list-index-js-197.js","sourcesContent":["export default class NotificationMessage {\n  element;\n  constructor(message = '', {\n    duration = 1000,\n    type = 'success',\n  } = {}) {\n    this.duration = duration;\n    this.message = message;\n    this.type = type;\n    this.render();\n    if (NotificationMessage.isAlreadyShow) {\n      NotificationMessage.isAlreadyShow.remove(NotificationMessage.isAlreadyShow);\n    } else {\n      NotificationMessage.isAlreadyShow = false;\n    }\n  }\n  getTemplate () {\n    return `<div class=\"notification\" style=\"--value:2s\">\n    <div class=\"timer\"></div>\n    <div class=\"inner-wrapper\">\n      <div class=\"notification-header\">${this.type}</div>\n      <div class=\"notification-body\">${this.message}</div>\n    </div>\n  </div>`;\n  }\n  render() {\n    const element = document.createElement('div'); // (*)\n    element.innerHTML = this.getTemplate();\n    this.element = element.firstElementChild;\n    this.element.classList.add(this.type);\n  }\n  show(element = document.body) {\n    element.append(this.element);\n    NotificationMessage.isAlreadyShow = this.element;\n    const timer = setTimeout(() => this.remove(), this.duration);\n    return this.element;\n  }\n  remove() {\n    this.element.remove();\n  }\n  destroy() {\n    this.remove();\n  }\n}\n","import fetchJson from \"../../utils/fetch-json.js\";\nimport NotificationMessage from '../notification';\n\nconst BACKEND_URL = process.env.BACKEND_URL;\n\nexport default class SortableTable {\n  subElements = {};\n  pageSize = 30;\n  onWindowScroll = () => {\n    if (this.element.classList.contains(\"sortable-table_loading\") || this.endOfData || this.isSortLocally)\n      return;\n    if (this.element.getBoundingClientRect().bottom < document.documentElement.clientHeight) {\n\n      this.loadData(this.sorted.id, this.sorted.order)\n        .then((data) => {\n          const replace = false;\n          this.update(data, replace);\n          this.element.classList.remove(\"sortable-table_loading\");\n        })\n        .catch(error => {\n          const notification = new NotificationMessage('Ошибка получения данных', {\n            duration: 2000,\n            type: 'error'\n          });\n        });\n\n    }\n  };\n  handleClick = (event) => {\n    const element = event.target.closest('[data-sortable=\"true\"]');\n    if (!element) return;\n    let order ;\n    switch (element.dataset.order) {\n    case 'asc':\n      order = 'desc';\n      break;\n    case 'desc':\n      order = 'asc';\n      break;\n    default:\n      order = 'asc';\n    }\n    this.sort(element.dataset.id, order).then(r => r);\n  };\n  constructor(headerConfig = [], {\n    data = [],\n    sorted = {\n      id: headerConfig.find(item => item.sortable).id,\n      order: 'asc'\n    },\n    isSortLocally = false,\n    url = '',\n    clickableString = true\n  } = {}) {\n    this.headerConfig = headerConfig;\n    this.url = typeof url === 'string'? new URL(url, BACKEND_URL): url;\n    this.data = data;\n    this.sorted = sorted;\n    this.isSortLocally = isSortLocally;\n    this.clickableString = clickableString;\n    this.render().then(() => this.initEventListeners());\n  }\n  getTemplate () {\n    return `<div data-element=\"productsContainer\" class=\"products-list__container\">\n  <div class=\"sortable-table\">\n  <div data-element=\"header\" class=\"sortable-table__header sortable-table__row\"></div>\n  <div data-element=\"body\" class=\"sortable-table__body\"></div>\n  <\\div><\\div>`;\n  }\n  renderHeaders (sortColumn, order) {\n    const headerArr = [];\n    for (const obj of this.headerConfig) {\n      let arrowTemplate = '';\n      let orderType = '';\n      if (obj.id === sortColumn) {\n        arrowTemplate = `<span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\n        <span class=\"sort-arrow\"></span>\n        </span>`;\n        orderType = order;\n      }\n      headerArr.push(`<div class=\"sortable-table__cell\" data-id=\"${obj.id}\" data-sortable=\"${obj.sortable}\" data-order=\"${orderType}\">\n      <span>${obj.title}</span>${arrowTemplate}\n      </div>`);\n    }\n    return headerArr.join('');\n  }\n\n  renderBody (data) {\n    const bodyArr = [];\n    for (const obj of data) {\n      bodyArr.push(`${this.clickableString ? `<a href=\"/products/${obj.id}\" `:'<div '} class=\"sortable-table__row\">\n        ${this.headerConfig\n        .filter(item => obj[item.id])\n        .map(el => el.template ? el.template(obj[el.id]) : `<div class=\"sortable-table__cell\">${obj[el.id]}</div>`)\n        .join('')}\n        ${this.clickableString ? '</a>':'</div>'}`);\n    }\n    return bodyArr.join('');\n  }\n  getSubElements(element) {\n    const arr = element.querySelectorAll('[data-element]');\n    for (const elem of arr) {\n      this.subElements[elem.dataset.element] = elem;\n    }\n  }\n  async render() {\n    const {id, order} = this.sorted;\n    const element = document.createElement('div'); // (*)\n    element.innerHTML = this.getTemplate();\n    this.element = element.firstElementChild;\n    this.getSubElements(this.element);\n    this.data = await this.loadData(id, order);\n    this.getTable(id, order);\n  }\n\n  async loadData(id, order) {\n    this.url.searchParams.set('_sort', id);\n    this.url.searchParams.set('_order', order);\n    this.url.searchParams.set(\"_start\", this.data.length);\n    this.url.searchParams.set(\"_end\", this.data.length + this.pageSize);\n    this.element.classList.add(\"sortable-table_loading\");\n    const data = await fetchJson(this.url);\n    this.endOfData = !data.length;\n    this.element.classList.remove(\"sortable-table_loading\");\n    return data;\n  }\n  update(data, replace = true) {\n    const rows = document.createElement('div');\n\n    this.data = [...this.data, ...data];\n    rows.innerHTML = this.renderBody(data);\n\n    if (replace) this.subElements.body.innerHTML = '';\n    this.subElements.body.append(...rows.childNodes);\n  }\n\n  initEventListeners () {\n    this.subElements.header.addEventListener('pointerdown', this.handleClick);\n    document.addEventListener(\"scroll\", this.onWindowScroll);\n  }\n  sortOnClient(id, order) {\n    const directions = {\n      asc: -1,\n      desc: 1\n    };\n    const direction = directions[order];\n    const sortType = this.headerConfig.find(item => item.id === id).sortType;\n    this.data.sort((a, b) => {\n      switch (sortType) {\n      case 'number':\n        return direction * (a[id] - b[id]);\n      case 'string':\n        return direction * a[id].localeCompare(b[id], ['ru', 'en']);\n      default:\n        return direction * (a[id] - b[id]);\n      }\n\n    });\n    this.getTable(id, order);\n  }\n\n  async sortOnServer(id, order) {\n    this.data = await this.loadData(id, order);\n    this.getTable(id, order);\n  }\n\n  async sort(id, order) {\n    !this.isSortLocally ? await this.sortOnServer(id, order) : this.sortOnClient(id, order);\n  }\n  getTable (id, order) {\n    this.subElements.header.innerHTML = this.renderHeaders(id, order);\n    this.subElements.body.innerHTML = this.renderBody(this.data);\n    this.element.classList.remove(\"sortable-table_loading\");\n  }\n\n  remove () {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n    document.removeEventListener(\"scroll\", this.onWindowScroll);\n    this.subElements.header.removeEventListener('pointerdown', this.handleClick);\n  }\n\n}\n","export default class DoubleSlider {\n  element;\n  subElements = {};\n\n  onThumbPointerMove = event => {\n    event.preventDefault();\n\n    const { left: innerLeft, right: innerRight, width } = this.subElements.inner.getBoundingClientRect();\n\n    if (this.dragging === this.subElements.thumbLeft) {\n      let newLeft = (event.clientX - innerLeft + this.shiftX) / width;\n\n      if (newLeft < 0) {\n        newLeft = 0;\n      }\n      newLeft *= 100;\n      const right = parseFloat(this.subElements.thumbRight.style.right);\n\n      if (newLeft + right > 100) {\n        newLeft = 100 - right;\n      }\n\n      this.dragging.style.left = this.subElements.progress.style.left = newLeft + '%';\n      this.subElements.from.innerHTML = this.formatValue(this.getValue().from);\n    }\n\n    if (this.dragging === this.subElements.thumbRight) {\n      let newRight = (innerRight - event.clientX - this.shiftX) / width;\n\n      if (newRight < 0) {\n        newRight = 0;\n      }\n      newRight *= 100;\n\n      const left = parseFloat(this.subElements.thumbLeft.style.left);\n\n      if (left + newRight > 100) {\n        newRight = 100 - left;\n      }\n      this.dragging.style.right = this.subElements.progress.style.right = newRight + '%';\n      this.subElements.to.innerHTML = this.formatValue(this.getValue().to);\n    }\n  };\n\n  onThumbPointerUp = () => {\n    this.element.classList.remove('range-slider_dragging');\n\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\n\n    this.element.dispatchEvent(new CustomEvent('range-select', {\n      detail: this.getValue(),\n      bubbles: true\n    }));\n  };\n\n  constructor({\n    min = 100,\n    max = 200,\n    formatValue = value => '$' + value,\n    selected = {\n      from: min,\n      to: max\n    }\n  } = {}) {\n    this.min = min;\n    this.max = max;\n    this.formatValue = formatValue;\n    this.selected = selected;\n\n    this.render();\n  }\n\n  get template() {\n    const { from, to } = this.selected;\n\n    return `<div class=\"range-slider\">\n      <span data-element=\"from\">${this.formatValue(from)}</span>\n      <div data-element=\"inner\" class=\"range-slider__inner\">\n        <span data-element=\"progress\" class=\"range-slider__progress\"></span>\n        <span data-element=\"thumbLeft\" class=\"range-slider__thumb-left\"></span>\n        <span data-element=\"thumbRight\" class=\"range-slider__thumb-right\"></span>\n      </div>\n      <span data-element=\"to\">${this.formatValue(to)}</span>\n    </div>`;\n  }\n\n  render() {\n    const element = document.createElement('div');\n\n    element.innerHTML = this.template;\n\n    this.element = element.firstElementChild;\n    this.element.ondragstart = () => false;\n\n    this.subElements = this.getSubElements(element);\n\n    this.initEventListeners();\n\n    this.update();\n  }\n\n  initEventListeners() {\n    const { thumbLeft, thumbRight } = this.subElements;\n\n    thumbLeft.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\n    thumbRight.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\n  }\n\n  getSubElements(element) {\n    const result = {};\n    const elements = element.querySelectorAll('[data-element]');\n\n    for (const subElement of elements) {\n      const name = subElement.dataset.element;\n\n      result[name] = subElement;\n    }\n\n    return result;\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\n  }\n\n  update() {\n    const rangeTotal = this.max - this.min;\n    const left = Math.floor((this.selected.from - this.min) / rangeTotal * 100) + '%';\n    const right = Math.floor((this.max - this.selected.to) / rangeTotal * 100) + '%';\n\n    this.subElements.progress.style.left = left;\n    this.subElements.progress.style.right = right;\n\n    this.subElements.thumbLeft.style.left = left;\n    this.subElements.thumbRight.style.right = right;\n  }\n\n  onThumbPointerDown(event) {\n    const thumbElem = event.target;\n\n    event.preventDefault();\n\n    const { left, right } = thumbElem.getBoundingClientRect();\n\n    if (thumbElem === this.subElements.thumbLeft) {\n      this.shiftX = right - event.clientX;\n    } else {\n      this.shiftX = left - event.clientX;\n    }\n\n    this.dragging = thumbElem;\n\n    this.element.classList.add('range-slider_dragging');\n\n    document.addEventListener('pointermove', this.onThumbPointerMove);\n    document.addEventListener('pointerup', this.onThumbPointerUp);\n  }\n\n  getValue() {\n    const rangeTotal = this.max - this.min;\n    const { left } = this.subElements.thumbLeft.style;\n    const { right } = this.subElements.thumbRight.style;\n\n    const from = Math.round(this.min + parseFloat(left) * 0.01 * rangeTotal);\n    const to = Math.round(this.max - parseFloat(right) * 0.01 * rangeTotal);\n\n    return { from, to };\n  }\n}\n","const header = [\n  {\n    id: 'images',\n    title: 'Фото',\n    sortable: false,\n    template: (data = []) => {\n      return `\n          <div class=\"sortable-table__cell\">\n            <img class=\"sortable-table-image\" alt=\"Image\" src=\"${data[0].url}\">\n          </div>\n        `;\n    }\n  },\n  {\n    id: 'title',\n    title: 'Название',\n    sortable: true,\n    sortType: 'string'\n  },\n  {\n    id: 'subcategory',\n    title: 'Категория',\n    sortable: false,\n    template: data => {\n      return `<div class=\"sortable-table__cell\">\n                <span data-tooltip='<div class=\"sortable-table-tooltip\"><span class=\"sortable-table-tooltip__category\">${data.category.title + ' / '}</span><b class=\"sortable-table-tooltip__subcategory\">${data.title}</b></div>'>${data.title}</span>\n           </div>`;\n    }\n  },\n  {\n    id: 'quantity',\n    title: 'Количество',\n    sortable: true,\n    sortType: 'number'\n  },\n  {\n    id: 'price',\n    title: 'Цена',\n    sortable: true,\n    sortType: 'number'\n  },\n  {\n    id: 'status',\n    title: 'Статус',\n    sortable: true,\n    sortType: 'number',\n    template: data => {\n      return `<div class=\"sortable-table__cell\">\n          ${data > 0 ? 'Active' : 'Inactive'}\n        </div>`;\n    }\n  },\n];\n\nexport default header;\n","import fetchJson from '../../../utils/fetch-json';\nimport SortableTable from '../../../components/sortable-table';\nimport DoubleSlider from '../../../components/double-slider';\nimport header from '../../products/list/products-header';\nconst BACKEND_URL = process.env.BACKEND_URL;\n\nexport default class Page {\n  element;\n  subElements = {};\n  components = {};\n  start = 0;\n  end = 30;\n  url = new URL('api/rest/products?_embed=subcategory.category', BACKEND_URL);\n\n  async updateComponents(from, to) {\n    const data = await this.loadData(from, to);\n\n    this.components.sortableTable.update(data);\n\n  }\n\n  loadData(from = this.start, to = this.end) {\n    this.url.searchParams.set('_start', '0');\n    this.url.searchParams.set('_end', '30');\n    this.url.searchParams.set('_sort', 'title');\n    this.url.searchParams.set('_order', 'asc');\n    this.url.searchParams.set('price_gte', from);\n    this.url.searchParams.set('price_lte', to);\n    this.components.sortableTable.endOfData = false;\n    this.components.sortableTable.url = this.url;\n    this.components.sortableTable.data = [];\n    return fetchJson(this.url);\n  }\n\n  initComponents() {\n    const sliderContainer = new DoubleSlider({min:1, max: 4000});\n    this.url.searchParams.set('_start', this.start);\n    this.url.searchParams.set('_end', this.end);\n    const sortableTable = new SortableTable(header,{\n      url: this.url,\n    });\n    this.components = {\n      sliderContainer,\n      sortableTable\n    };\n  }\n\n  get template() {\n    return `<div class=\"products-list\">\n              <div class=\"content__top-panel\">\n                <h1 class=\"page-title\">Товары</h1>\n                <a href=\"/products/add\" class=\"button-primary\">Добавить товар</a>\n              </div>\n              \n              <div class=\"content-box content-box_small\">\n                <form class=\"form-inline\">\n                  <div class=\"form-group\">\n                    <label class=\"form-label\">Сортировать по:</label>\n                    <input type=\"text\" data-element=\"filterName\" class=\"form-control\" placeholder=\"Название товара\">\n                  </div>\n                  \n                  <div class=\"form-group\" data-element=\"sliderContainer\">\n                    <label class=\"form-label\">Цена:</label>\n                  </div>\n                  \n                  <div class=\"form-group\">\n                      <label class=\"form-label\">Статус:</label>\n                      <select class=\"form-control\" data-element=\"filterStatus\">\n                          <option value=\"\" selected=\"\">Любой</option>\n                          <option value=\"1\">Активный</option>\n                          <option value=\"0\">Неактивный</option>\n                      </select>\n                  </div>\n                </form>\n              </div>    \n                            \n              <div data-element=\"sortableTable\">\n                  <!-- sortable-table component -->\n              </div>\n            </div>`;\n  }\n\n  render() {\n    const element = document.createElement('div');\n\n    element.innerHTML = this.template;\n\n    this.element = element.firstElementChild;\n    this.getSubElements(element);\n    this.initComponents();\n    this.renderComponents();\n    this.initEventListeners();\n\n    return this.element;\n  }\n  renderComponents() {\n    for (const component of Object.keys(this.components)) {\n      this.subElements[component].append(this.components[component].element);\n    }\n  }\n  initEventListeners() {\n    this.subElements.sliderContainer.addEventListener('range-select', event => {\n      const { from, to } = event.detail;\n\n      this.updateComponents(from, to);\n    });\n    this.subElements.filterName.addEventListener('input', event => {\n      this.url.searchParams.set('title_like', event.target.value);\n\n      this.updateComponents();\n    });\n    this.subElements.filterStatus.addEventListener('change', event => {\n      const status = [...event.target.options].find(item => item.selected).value;\n      if (!status)  {\n        this.url.searchParams.delete('status');\n      } else {\n\n        this.url.searchParams.set('status', status);\n      }\n\n      this.updateComponents();\n    })\n  }\n  getSubElements(element) {\n    const arr = element.querySelectorAll('[data-element]');\n    for (const elem of arr) {\n      this.subElements[elem.dataset.element] = elem;\n    }\n  }\n  remove() {\n    this.element.remove();\n  }\n  destroy() {\n    this.subElements = {};\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n    this.remove();\n  }\n\n}\n","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n"],"sourceRoot":""}